# Сервисы

## Структура папок

Далее следует описание структур папок модуля. Для примера, используется сервис с названием `YOUR_SERVICE_NAME`.

### Схемы данных

Схемы данных находятся в папке `src/main/resources/schemas`:

* папка `common` содержит описание общих схем данных, совместно используемых разными сервисами
* папка `YOUR_SERVICE_NAME` должна содержать описание схем данных, используемых сервисом `YOUR_SERVICE_NAME`

### WSDL

WSDL-файлы сервисов находятся в папке `src/main/resources/wsdl` c названием `YOUR_SERVICE_NAME.wsdl`.

### Контексты Spring

Контексты Spring сервиса `YOUR_SERVICE_NAME` находятся в папке `src/main/resources/contexts/YOUR_SERVICE_NAME`.

### Пакеты

Реализация сервисов находится в пакете `ru.nahodka.bi.services.YOUR_SERVICE_NAME`.

### Декрипторы развертывания (web.xml)

Для каждого сервиса необходимо создавать отдельный `web.xml` файл, который при сборке должен быть помещен в директорию `/WEB-INF`, как говорит нам спецификация сервлетов.
Поэтому для каждого сервиса `YOUR_SERVICE_NAME` создается отдельный декриптор развертывания `src/main/deplyment/YOUR_SERVICE_NAME/web.xml`.
Выбор необходимого дескриптора развертывания при сборке осуществляется путем указания необходимого профиля в `pom.xml`.

## Генерация классов сервиса

Для генерации классов сервиса из xsd необходимо выполнить команду `mvn org.jvnet.jax-ws-commons:jaxws-maven-plugin:2.3:wsimport`, сгенерированные классы будут находится в пакете папке `target/generated-sources/wsdlimport/EventService`.
Генерация классов требуется при изменении описания сервиса (изменения в WSDL, xsd).

> При ручном вызове генерации классов, может выпадать сообщение `"/your/path/to/wsdl/your-service.wsdl not found"`.
> Лечится удалением той папки, в которой генерируются классы (`target`).

## Запуск и отладка

Для отладки сервис запускается с помощью Jetty (пакет `services.YOUR_SERVICE_NAME.run`). Для продакшена можно использовать дескрипторы развертывания (см. выше).